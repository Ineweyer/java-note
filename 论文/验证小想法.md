# 验证小想法

## 数据集

原始的两个网络的样子：

![](https://s2.ax1x.com/2019/01/16/kS92nI.png)

数据集：

```octave
A = [
0 1 0 0 0 0 0 1 0;
1 0 0 0 1 0 0 1 0;
0 0 0 0 1 0 0 0 0;
0 0 0 0 1 0 0 0 0;
0 1 1 1 0 1 0 1 0;
0 0 0 0 1 0 1 1 0;
0 0 0 0 0 1 0 0 0;
1 1 0 0 0 1 0 0 1;
0 0 0 0 0 0 0 1 0
]

B = [
0 1 0 0 0 0 0 1 0;
1 0 0 0 1 0 0 0 0;
0 0 0 0 1 0 0 0 0;
0 0 0 0 1 0 0 0 0;
0 1 1 1 0 1 0 0 0;
0 0 0 0 1 0 1 1 0;
0 0 0 0 0 1 0 0 0;
1 0 0 0 0 1 0 0 1;
0 0 0 0 0 0 0 1 0
]
```



## 使用EigenAlign算法中的LowRankAlign：

### 直接的全图匹配：

1. 首先对两个矩阵进行分解

```octave
[x, y] = eig(A)
# 结果如下：
x =

 Columns 1 through 6:

  -2.9208e-01   1.3975e-01   2.8700e-01   5.0823e-01   4.4425e-01   3.5332e-01
  -4.3145e-01   3.3147e-01   1.6007e-01  -6.5851e-01  -1.9346e-01   1.4096e-01
  -1.8693e-01   9.9350e-02  -5.8028e-02   1.8104e-01   3.8030e-01  -3.7680e-01
  -1.8693e-01   9.9350e-02  -5.8028e-02   1.8104e-01   3.8030e-01  -3.7680e-01
  -5.4779e-01  -2.0621e-01   1.0689e-01  -1.5673e-01  -2.3823e-01  -4.8664e-01
  -3.7551e-01   5.1936e-01   4.4784e-01   2.1355e-01  -3.3308e-01  -3.3118e-01
  -1.2814e-01  -2.5023e-01  -2.4311e-01  -2.4668e-01   5.3172e-01  -2.5644e-01
  -4.2447e-01  -6.2154e-01  -6.8876e-01   2.1855e-01  -8.4835e-02   3.1536e-01
  -1.4485e-01   2.9945e-01   3.7389e-01  -2.5246e-01   1.3543e-01   2.4418e-01

 Columns 7 through 9:

   2.0460e-01   3.3922e-01  -4.4431e-17
   3.3610e-01   3.1963e-01  -1.2935e-16
   2.7652e-01  -8.9249e-02   7.0711e-01
   2.7652e-01  -8.9249e-02  -7.0711e-01
   2.5075e-01  -2.5085e-02   5.0878e-17
  -5.1120e-01   7.6104e-02  -2.9189e-16
  -5.6374e-01   2.7077e-01  -1.1693e-16
  -1.5057e-01  -2.2429e-01   1.2935e-16
  -1.6605e-01  -7.9799e-01   2.6792e-16

y =

Diagonal Matrix

 Columns 1 through 6:

   2.9304e+00            0            0            0            0            0
            0  -2.0756e+00            0            0            0            0
            0            0  -1.8421e+00            0            0            0
            0            0            0  -8.6567e-01            0            0
            0            0            0            0  -6.2643e-01            0
            0            0            0            0            0   1.2915e+00
            0            0            0            0            0            0
            0            0            0            0            0            0
            0            0            0            0            0            0

 Columns 7 through 9:

            0            0            0
            0            0            0
            0            0            0
            0            0            0
            0            0            0
            0            0            0
   9.0680e-01            0            0
            0   2.8107e-01            0
            0            0  -5.1535e-18
```



```octave
[x2, y2] = eig(B)
# 结果如下：
x2 =

 Columns 1 through 6:

  -1.9135e-02   5.1849e-01  -3.3867e-01   3.2815e-01  -2.5270e-16  -2.7560e-01
  -2.6166e-01  -4.2193e-01   1.4376e-01  -4.7285e-01  -1.3092e-16  -3.5461e-01
  -2.7034e-01  -1.4416e-01  -3.5707e-01   1.8833e-01  -7.0711e-01   2.9749e-01
  -2.7034e-01  -1.4416e-01  -3.5707e-01   1.8833e-01   7.0711e-01   2.9749e-01
   5.9644e-01   2.6908e-01   2.4146e-01  -9.3471e-02   1.8806e-16   1.2573e-01
  -5.1358e-01   2.0798e-01   4.0710e-01   1.4258e-01   1.4257e-17  -1.8722e-01
   2.3278e-01  -1.1142e-01  -6.0202e-01  -2.8728e-01  -1.3788e-16  -4.4299e-01
   3.0388e-01  -5.4587e-01   8.5265e-02   3.0999e-01   5.0999e-25   2.3814e-01
  -1.3773e-01   2.9245e-01  -1.2609e-01  -6.2458e-01   1.5238e-16   5.6346e-01

 Columns 7 through 9:

   5.0000e-01   2.9725e-01   3.0677e-01
   5.0000e-01  -1.2078e-01   3.4484e-01
  -1.0463e-16  -3.2832e-01   2.1651e-01
  -1.9391e-16  -3.2832e-01   2.1651e-01
  -1.5881e-17  -4.7024e-01   5.1758e-01
  -5.0000e-01   1.0392e-01   4.5942e-01
  -5.0000e-01   7.2556e-02   1.9218e-01
  -8.8485e-17   5.4652e-01   3.8849e-01
  -8.8485e-17   3.8158e-01   1.6251e-01

y2 =

Diagonal Matrix

 Columns 1 through 6:

  -2.2063e+00            0            0            0            0            0
            0  -1.8666e+00            0            0            0            0
            0            0  -6.7623e-01            0            0            0
            0            0            0  -4.9631e-01            0            0
            0            0            0            0   2.0608e-17            0
            0            0            0            0            0   4.2263e-01
            0            0            0            0            0            0
            0            0            0            0            0            0
            0            0            0            0            0            0

 Columns 7 through 9:

            0            0            0
            0            0            0
            0            0            0
            0            0            0
            0            0            0
            0            0            0
   1.0000e+00            0            0
            0   1.4323e+00            0
            0            0   2.3905e+00
```

2. 得到目标函数的一个近似解

```octave
 x*x2'
ans =

 Columns 1 through 6:

   0.2533841  -0.2455624  -0.2683463   0.3599200  -0.2298952   0.2351739
   0.1340365   0.3868865  -0.0385369  -0.3121239  -0.2005198   0.1005714
   0.5666469   0.4395441  -0.1075798   0.4302490   0.2448826   0.3667258
   0.1328148  -0.0481310  -0.4137750   0.1240537  -0.4870842  -0.2829924
   0.0679685   0.6207924   0.1420532  -0.1948564  -0.3911400   0.2227443
   0.0531727  -0.3048235   0.0189664  -0.4520805  -0.0734672   0.8391454
  -0.2566123  -0.0028298  -0.4301033   0.3218568  -0.3389665   0.2376412
  -0.2380249   0.0109332   0.7188838   0.5989090  -0.4620309  -0.1675737
  -0.4389618   0.0114425   0.0538120   0.2453349   0.5140079   0.2072709

 Columns 7 through 9:

  -0.6365529   0.2864988   0.0560013
  -0.2518580  -0.2942796   0.7488612
   0.0864169   0.0763339  -0.1824155
  -0.1853722  -0.4730767  -0.4122441
  -0.0354894  -0.2229644  -0.1842190
  -0.0684021  -0.3305102  -0.1438088
   0.6303877   0.0873682   0.0880230
   0.2416271   0.1718321  -0.0808508
  -0.3026948  -0.6318280   0.0511510
```

3. 如果采取贪婪匹配算法的话匹配结果为：

**注** 两个图中的节点是一一对应的,下面是top k的表示形式

```
1 -> 3 1 2 4
2 -> 5 3 2 9
3 -> 8 5 9 6
4 -> 8 3 1 7
5 -> 9 3 6 2
6 -> 6 3 7 5
7 -> 7 8 3 5
8 -> 1 8 7 3
9 -> 2 7 9 1
```

从上面的形式中能够看出，如果只选top 1的话，正确率只有2/9,

如果选择top 4的话，正确率能够达到：6/9

### 仅选取重要的节点进行对齐

1. 输入变为：

```octave
A_Imp = [
0 1 0 0 1;
1 0 1 0 1;
0 1 0 1 0;
0 0 1 0 1;
1 1 0 1 0
]

B_Imp = [
0 1 0 0 1;
1 0 1 0 0;
0 1 0 1 0;
0 0 1 0 1;
1 0 0 1 0
]
```

2. 计算两个邻居矩阵的的特征向量

```octave
octave:4> [x, y] = eig(A_Imp)
x =

   1.4570e-16  -7.3924e-01  -3.7368e-16   5.2066e-01   4.2713e-01
  -5.0000e-01   4.3249e-01   5.0000e-01   1.7934e-01   5.2990e-01
   5.0000e-01  -1.9929e-01   5.0000e-01  -5.7645e-01   3.5775e-01
  -5.0000e-01  -1.9929e-01  -5.0000e-01  -5.7645e-01   3.5775e-01
   5.0000e-01   4.3249e-01  -5.0000e-01   1.7934e-01   5.2990e-01

y =

Diagonal Matrix

  -2.0000e+00            0            0            0            0
            0  -1.1701e+00            0            0            0
            0            0   7.1234e-16            0            0
            0            0            0   6.8889e-01            0
            0            0            0            0   2.4812e+00

octave:5> [x2, y2] = eig(B_Imp)
x2 =

  -0.37175  -0.51167  -0.60150   0.19544   0.44721
   0.60150   0.19544  -0.37175  -0.51167   0.44721
  -0.60150   0.19544   0.37175  -0.51167   0.44721
   0.37175  -0.51167   0.60150   0.19544   0.44721
   0.00000   0.63246  -0.00000   0.63246   0.44721

y2 =

Diagonal Matrix

  -1.61803         0         0         0         0
         0  -1.61803         0         0         0
         0         0   0.61803         0         0
         0         0         0   0.61803         0
         0         0         0         0   2.00000
```

3. 得到一个目标函数的近似解

```
octave:6> x*x2'
ans =

   0.671021  -0.219860  -0.219860   0.671021   0.052776
  -0.064138  -0.256883   0.716366   0.165615   0.623930
  -0.337322   0.530869   0.301116   0.635927  -0.330633
   0.635927   0.301116   0.530869  -0.337322  -0.330633
   0.165615   0.716366  -0.256883  -0.064138   0.623930
```

4. 如果采用贪婪匹配算法的话

```
1 -> 1 4 5 2 3
2 -> 5 3 4 1 2
3 -> 2 4 3 1 5
4 -> 1 3 1 5 4
5 -> 5 2 1 3 4
```

对于上面的的结果，如果选取top 1，则正确率为 2/5

如果选取top 2, 正确率为2/5

### 结果分析

从上面的结果看，但是由于总量的减少正确率能够提高，其实丢掉部分以后效果还是不是太好，因为少部分节点组成的子图也不是特别纯净的。从这来说，规模感觉对识别的的帮助不大，还是图的同构性对问题的影响更大。想办法使结构更加相似更为重要。



