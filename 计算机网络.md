# 计算机网络

## 1.   OSI与TCP/IP各层的结构与功能,都有哪些协议

### 1.1 五层协议体系结构

![äºå±åè®®çä½ç³"ç"æ](https://camo.githubusercontent.com/94ac65420edf518aa8059bae10125db1d0a35c81/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f372f32392f313634653533303734373165386562613f773d36333326683d33343426663d706e6726733d313634363233)

#### 1.1.1 应用层

**应用层(application-layer）的任务是通过应用进程间的交互来完成特定网络应用**。应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则。对于不同的网络应用需要不同的应用层协议。我们把应用层交互的数据单元称为报文。

**应用层协议**

域名系统（DNS）、HTTP协议、SMTP协议

**域名系统（DNS）**

因特网的核心服务，可以将域名和ip地址相互映射的一个分布式数据库，不需要记住ip方面人们访问互联网。

**HTTP协议**

超文本传输协议，所有的WWW文件都必须遵守这个标准。最初设计的目的是为了提供一种发布和接受html页面的方法。

#### 1.1.2 运输层

**运输层(transport layer)的主要任务就是负责向两台主机进程之间的通信提供通用的数据传输服务**。应用进程利用该服务传送应用层报文。“通用的”是指并不针对某一个特定的网络应用，而是多种应用可以使用同一个运输层服务。由于一台主机可同时运行多个线程，因此运输层有复用和分用的功能。所谓复用就是指多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程。

**运输层主要使用以下两种协议**

1. **传输控制协议 TCP**（Transmisson Control Protocol）--提供**面向连接**的，**可靠的**数据传输服务。
2. **用户数据协议 UDP**（User Datagram Protocol）--提供**无连接**的，尽最大努力的数据传输服务（**不保证数据传输的可靠性**）。

##### 1.1.2.1 UDP 的主要特点

1. UDP 是**无连接**的；
2. UDP 使用**尽最大努力交付，即不保证可靠交付**，因此主机不需要维持复杂的链接状态（这里面有许多参数）；
3. UDP 是**面向报文**的；
4. UDP 没有**拥塞控制**，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如 直播，实时视频会议等）；
5. UDP 支持**一对一、一对多、多对一和多对多**的交互通信；
6. UDP 的**首部开销小，只有8个字节**，比TCP的20个字节的首部要短。

##### 1.1.2.2 TCP 的主要特点

1. TCP 是**面向连接**的。（就好像打电话一样，通话前需要先拨号建立连接，通话结束后要挂机释放连接）；
2. 每一条 TCP 连接只能有两个端点，每一条TCP连接只能是**点对点的（一对一）**；
3. TCP 提供**可靠交付的服务**。通过TCP连接传送的数据，无差错、不丢失、不重复、并且按序到达；
4. TCP 提供**全双工通信**。TCP 允许通信双方的应用进程在任何时候都能发送数据。TCP 连接的两端都设有发送缓存和接收缓存，用来临时存放双方通信的数据；
5. **面向字节流**。TCP 中的“流”（Stream）指的是流入进程或从进程流出的字节序列。“面向字节流”的含义是：虽然应用程序和 TCP 的交互是一次一个数据块（大小不等），但 TCP 把应用程序交下来的数据仅仅看成是一连串的无结构的字节流。

##### 1.1.2.3 TCP、UDP协议的区别

![TCPãUDPåè®®çåºå"](https://camo.githubusercontent.com/409f705f6df8c77c7166e543eefa07c40511a28a/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f31392f313632646235653937653961396530313f696d61676556696577322f302f772f313238302f682f3936302f666f726d61742f776562702f69676e6f72652d6572726f722f31)

UDP使用场景：QQ语音、QQ视频、直播等（即时通信）需要低延迟，对于少部分的丢包具有很好的容忍力

TCP使用场景：文件传输、发送和接收邮件、远程登录等

##### 1.1.2.3 TCP如何保证可靠传输

1. 应用数据被分割成 TCP 认为最适合发送的数据块。
2. TCP 给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。
3. **校验和：** TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段。
4. TCP 的接收端会丢弃重复的数据。
5. **流量控制：** TCP 连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议。 （TCP 利用滑动窗口实现流量控制）
6. **拥塞控制：** 当网络拥塞时，减少数据的发送。
7. **停止等待协议** 也是为了实现可靠传输的，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。 **超时重传：** 当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。

##### 停止等待协议

- 停止等待协议是为了实现可靠传输的，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组；
- 在停止等待协议中，若接收方收到重复分组，就丢弃该分组，但同时还要发送确认；

**1) 无差错情况:**

[![img](https://camo.githubusercontent.com/87a4e3d99e9e650c22572eb8ba3ccf74feb86d30/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166613863333831366139303f773d35313426683d34373326663d706e6726733d39393234)](https://camo.githubusercontent.com/87a4e3d99e9e650c22572eb8ba3ccf74feb86d30/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166613863333831366139303f773d35313426683d34373326663d706e6726733d39393234)

发送方发送分组,接收方在规定时间内收到,并且回复确认.发送方再次发送。

**2) 出现差错情况（超时重传）:** [![img](https://camo.githubusercontent.com/b499ea2d7d33b0d69af03f8dbdec2321f811d1a0/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166616566646632343961623f773d39353326683d34383026663d706e6726733d3139313633)](https://camo.githubusercontent.com/b499ea2d7d33b0d69af03f8dbdec2321f811d1a0/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166616566646632343961623f773d39353326683d34383026663d706e6726733d3139313633)停止等待协议中超时重传是指只要超过一段时间仍然没有收到确认，就重传前面发送过的分组（认为刚才发送过的分组丢失了）。因此每发送完一个分组需要设置一个超时计时器，其重转时间应比数据在分组传输的平均往返时间更长一些。这种自动重传方式常称为 **自动重传请求 ARQ** 。另外在停止等待协议中若收到重复分组，就丢弃该分组，但同时还要发送确认。**连续 ARQ 协议** 可提高信道利用率。发送维持一个发送窗口，凡位于发送窗口内的分组可连续发送出去，而不需要等待对方确认。接收方一般采用累积确认，对按序到达的最后一个分组发送确认，表明到这个分组位置的所有分组都已经正确收到了。

**3) 确认丢失和确认迟到**

- **确认丢失**：确认消息在传输过程丢失 [![img](https://camo.githubusercontent.com/860937399b9aee59e78044f0c323cb0e24d6f5b7/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166623639343161373136353f773d39313826683d34363126663d706e6726733d3139383431)](https://camo.githubusercontent.com/860937399b9aee59e78044f0c323cb0e24d6f5b7/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166623639343161373136353f773d39313826683d34363126663d706e6726733d3139383431)当A发送M1消息，B收到后，B向A发送了一个M1确认消息，但却在传输过程中丢失。而A并不知道，在超时计时过后，A重传M1消息，B再次收到该消息后采取以下两点措施：
  1. 丢弃这个重复的M1消息，不向上层交付。
  2. 向A发送确认消息。（不会认为已经发送过了，就不再发送。A能重传，就证明B的确认消息丢失）。
- **确认迟到** ：确认消息在传输过程中迟到 [![img](https://camo.githubusercontent.com/26a9448d6b1d283bb0490a0c50630f88fde885fa/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166646438353932396536623f773d38393926683d34353026663d706e6726733d3233313635)](https://camo.githubusercontent.com/26a9448d6b1d283bb0490a0c50630f88fde885fa/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31362f313635343166646438353932396536623f773d38393926683d34353026663d706e6726733d3233313635)A发送M1消息，B收到并发送确认。在超时时间内没有收到确认消息，A重传M1消息，B仍然收到并继续发送确认消息（B收到了2份M1）。此时A收到了B第二次发送的确认消息。接着发送其他数据。过了一会，A收到了B第一次发送的对M1的确认消息（A也收到了2份确认消息）。处理如下：
  1. A收到重复的确认后，直接丢弃。
  2. B收到重复的M1后，也直接丢弃重复的M1。

##### 1.2.2.4 自动重传请求ARQ协议

停止等待协议中超时重传是指只要超过一段时间仍然没有收到确认，就重传前面发送过的分组（认为刚才发送过的分组丢失了）。因此**每发送完一个分组需要设置一个超时计时器**，其重转时间应比数据在分组传输的平均往返时间更长一些。这种自动重传方式常称为自动重传请求ARQ。

**优点：** 简单

**缺点：** 信道利用率低

##### 1.2.2.5 连续ARQ协议

连续 ARQ 协议可提高信道利用率。发送方维持一个发送窗口，凡位于**发送窗口内的分组可以连续发送出去，而不需要等待对方确认。接收方一般采用累计确认**，对按序到达的最后一个分组发送确认，表明到这个分组为止的所有分组都已经正确收到了。

**优点：** 信道利用率高，容易实现，即使确认丢失，也不必重传。

**缺点：** 不能向发送方反映出接收方已经正确收到的所有分组的信息。 比如：发送方发送了 5条 消息，中间第三条丢失（3号），这时接收方只能对前两个发送确认。发送方无法知道后三个分组的下落，而只好把后三个全部重传一次。这也叫 Go-Back-N（回退 N），表示需要退回来重传已经发送过的 N 个消息。

##### 1.2.2.6 滑动窗口

- TCP利用滑动窗口实现流量控制的机制
- 滑动窗口用来解决由于网络拥塞导致中间节点阻塞丢包，谁也发不了数据的问题。
- 滑动窗口的大小意味着接受方还有多大的缓冲区可以用来接收数据，如果窗口的大小为0，只能发送两类数据：紧急数据、发送一个字节数据通知声明希望接受的下一字节的滑动窗口大小。

##### 1.2.2.7 拥塞控制

拥塞控制和流量控制的区别：拥塞控制是一个全局性的过程，设计到所有的设备，而流量控制往往是点对点通信的控制，是端到端的问题，是通过抑制发送端发送数据的速率，一边接收端来得及接受。

![img](https://pic002.cnblogs.com/images/2010/125788/2010101120591634.jpg)

拥塞控制采用的四种算法：**慢开始、拥塞避免、快重传、快恢复**

**慢开始：** 窗口初始值为1，每次轮播之后翻倍

**拥塞避免：** 让拥塞窗口缓慢增大，每次加1

**快重传：**就是不按顺序的数据段，立即发送重复的确认段，

**快恢复：**超过三次以后立即重传当前丢失段，不用等待超时，快恢复之后直接进入拥塞避免阶段。

![å¿"éä¼ ä¸å¿"æ¢å¤](https://camo.githubusercontent.com/221825b6068e180c2fd6d4909d417bc5c6c8c2b9/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f382f31302f313635323334663033303364313734623f773d3131373426683d36343826663d706e6726733d313039353638)

#### 1.1.3 网络层

**在 计算机网络中进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。网络层的任务就是选择合适的网间路由和交换结点， 确保数据及时传送。** 在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。在 TCP/IP 体系结构中，由于网络层使用 **IP 协议**，因此分组也叫 **IP 数据报** ，简称 **数据报**。

这里要注意：**不要把运输层的“用户数据报 UDP ”和网络层的“ IP 数据报”弄混**。另外，无论是哪一层的数据单元，都可笼统地用“分组”来表示。

这里强调指出，网络层中的“网络”二字已经不是我们通常谈到的具体网络，而是指计算机网络体系结构模型中第三层的名称.

互联网是由大量的异构（heterogeneous）网络通过路由器（router）相互连接起来的。互联网使用的网络层协议是无连接的网际协议（Intert Prococol）和许多路由选择协议，因此互联网的网络层也叫做**网际层**或**IP层**。

 #### 1.1.4 数据链路层

**数据链路层(data link layer)通常简称为链路层。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。** 在两个相邻节点之间传送数据时，**数据链路层将网络层交下来的 IP 数据报组装程帧**，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。

在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提出数据部分，上交给网络层。 控制信息还使接收端能够检测到所收到的帧中有误差错。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。如果需要改正数据在链路层传输时出现差错（这就是说，数据链路层不仅要检错，而且还要纠错），那么就要采用可靠性传输协议来纠正出现的差错。这种方法会使链路层的协议复杂些。

#### 1.1.4 物理层

在物理层上所传送的数据单位是比特。 **物理层(physical layer)的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。** 使其上面的数据链路层不必考虑网络的具体传输介质是什么。“透明传送比特流”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。

在互联网使用的各种协中最重要和最著名的就是 TCP/IP 两个协议。现在人们经常提到的TCP/IP并不一定单指TCP和IP这两个具体的协议，而往往表示互联网所使用的整个TCP/IP协议族。

![ä¸å±ä½ç³"ç"æå¾](https://camo.githubusercontent.com/b645fda06ec0c409b013418cc7699f5fd9cfad4f/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f372f32392f313634653532393330396630666133333f773d3131323026683d3135383726663d67696626733d323235333235)

## 2. TCP三次握手和四次挥手

### 2.1 三次握手

#### 2.1.1 漫画图解

![TCP三次握手漫画图解](https://camo.githubusercontent.com/484f4f39a6e6bb5f4d6cda6709bff7196a23161b/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531323733393635343166313f773d38363426683d34333926663d706e6726733d323236303935)

![TCPä¸æ¬¡æ¡æ](https://camo.githubusercontent.com/e399530014904f78b9a709a7a8accbbb85755b18/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531343233336439353937323f773d35343226683d34323726663d6a70656726733d3135303838)

简单示意图：

- 客户端–发送带有 SYN 标志的数据包–一次握手–服务端
- 服务端–发送带有 SYN/ACK 标志的数据包–二次握手–客户端
- 客户端–发送带有带有 ACK 标志的数据包–三次握手–服务端

#### 2.1.2 为什么需要三次握手？

**三次握手的目的是建立可靠的通信信道，说到通讯，简单来说就是数据的发送与接收，而三次握手最主要的目的就是双方确认自己与对方的发送与接收是正常的。**

第一次握手：Client 什么都不能确认；Server 确认了对方发送正常

第二次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己接收正常，对方发送正常

第三次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己发送、接收正常，对方发送接收正常(**需要第三步的原因是：第二步完成后Server还不知道自己的发送功能是否正常，以及对方能否接收？**)

所以三次握手就能确认双发收发功能都正常，缺一不可。

#### 2.1.3 为什么要传回SYN？

接收端传回发送端所发送的SYN是为了告诉发送端，我接受的信息确实就是你所发送的信号了。

SYN是TCP/IP建立连接时使用的握手信号。

#### 2.1.4 传了SYN，为啥还要传ACK?

双方通信无误必须是两者互相发送信息都无误。传了 SYN，证明发送方到接收方的通道没有问题，但是**接收方到发送方的通道还需要 ACK 信号来进行验证。**

### 2.2  四次挥手

![TCPåæ¬¡æ¥æ](https://camo.githubusercontent.com/ae140718e064bf5f444224c9da3cdc2b8cd9f9a6/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531363736653261633061333f773d35303026683d33343026663d6a70656726733d3133343036)

断开一个 TCP 连接则需要“四次挥手”：

- 客户端-发送一个 FIN，用来关闭客户端到服务器的数据传送
- 服务器-收到这个 FIN，它发回一 个 ACK，确认序号为收到的序号加1 。和 SYN 一样，一个 FIN 将占用一个序号
- 服务器-关闭与客户端的连接，发送一个FIN给客户端
- 客户端-发回 ACK 报文确认，并将确认序号设置为收到序号加1

####  2.2.1 为什么要四次挥手？

任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送的时候，则发出连接释放通知，对方确认后就完全关闭了TCP连接。

## 3. 基础知识

### 3.1在浏览器中输入url地址 ->> 显示主页的过程（面试常客）

[![状态码](https://camo.githubusercontent.com/c7261a49ba596af8ab0029960a6507837279864e/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f31392f313632646235653938356161626462653f696d61676556696577322f302f772f313238302f682f3936302f666f726d61742f776562702f69676e6f72652d6572726f722f31)](https://camo.githubusercontent.com/c7261a49ba596af8ab0029960a6507837279864e/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f31392f313632646235653938356161626462653f696d61676556696577322f302f772f313238302f682f3936302f666f726d61742f776562702f69676e6f72652d6572726f722f31)

总体来说分为以下几个过程:

1. DNS解析
2. TCP连接
3. 发送HTTP请求
4. 服务器处理请求并返回HTTP报文
5. 浏览器解析渲染页面
6. 连接结束

### 3.2 状态码

![ç¶æç ](https://camo.githubusercontent.com/a508457c9a5252900e482a8ff8ff527970f8e9db/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336531396462613237656430303f773d36373326683d32313826663d706e6726733d3732393638)

### 3.3 各种协议之间的关系

![åç§åè®®ä¸HTTPåè®®ä¹é´çå³ç³"](https://camo.githubusercontent.com/797e891dc1fa83f905a18f60554c48b29b954817/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f352f382f313633336561643331366430373731333f773d38343126683d3131393326663d706e6726733d363039353133)

### 3.4 HTTP长连接、短连接

在HTTP/1.0中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。当客户端浏览器访问的某个HTML或其他类型的Web页中包含有其他的Web资源（如JavaScript文件、图像文件、CSS文件等），每遇到这样一个Web资源，浏览器就会重新建立一个HTTP会话。

而从HTTP/1.1起，默认使用长连接，用以保持连接特性。使用长连接的HTTP协议，会在响应头加入这行代码：

```
Connection:keep-alive
```

在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。

## 4. Https

### 4.1 SSL与TLS

SSL：（Secure Socket Layer） 安全套接层，于 1994 年由网景公司设计，并于 1995 年发布了 3.0 版本
TLS：（Transport Layer Security）传输层安全性协议，是 IETF 在 SSL3.0 的基础上设计的协议
以下全部使用 TLS 来表示

### 4.2 从网络协议角度理解HTTPS

![æ­¤å¾å¹¶ä¸åç¡®](https://camo.githubusercontent.com/4e3af713377550421537b4dadd4945fceec04722/68747470733a2f2f6c6572616e32646565706c6561726e6a617661776562746563682e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f736f6d6570686f746f2f2545342542382538332545352542312538322e706e67)

HTTP：HyperText Transfer Protocol 超文本传输协议
HTTPS：Hypertext Transfer Protocol Secure 超文本传输安全协议
TLS：位于 HTTP 和 TCP 之间的协议，其内部有 TLS握手协议、TLS记录协议
HTTPS 经由 HTTP 进行通信，但利用 TLS 来保证安全，即 HTTPS = HTTP + TLS

### 4.3 从密码学的角度理解HTTPS

HTTPS使用的TLS保证安全，安全包括两个部分：传输内容加密、服务端身份认证

#### 4.3.1 TLS工作流程

下图为服务端单向认证（服务器将证书发送给客户端认证），还有客户端/服务端的双向认证。流程类似。

![æ­¤å¾å¹¶ä¸åç¡®](https://camo.githubusercontent.com/e28a26b73b7e71996534e7f20d82cd27831a818f/68747470733a2f2f6c6572616e32646565706c6561726e6a617661776562746563682e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f736f6d6570686f746f2f746c732545362542352538312545372541382538422e706e67)

#### 4.3.2 密码基础

##### 4.3.2.1 伪随机数生成器

没有真正意义上的随机数，所以称为伪随机数。主要作用是生成对称密码的秘钥，用于公钥密码生成密钥对。

##### 4.3.2.2 消息认证码

消息认证码主要用于**验证消息的完整性与消息的认证**，其中消息的认证指“消息来自正确的发送者”

> 消息认证码用于验证和认证，而不是加密

![æ¶æ¯è®¤è¯ç è¿ç¨](https://camo.githubusercontent.com/60cc7a9b7b2cb08ac5cd4d28ac2a03795bb9ab30/68747470733a2f2f6c6572616e32646565706c6561726e6a617661776562746563682e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f736f6d6570686f746f2f2545362542362538382545362538312541462545382541452541342545382541462538312545372541302538312545382542462538372545372541382538422e706e67)

验证的过程为：

1. 发送者与接收者事先共享秘钥
2. 发送者根据发送消息计算 MAC 值
3. 发送者发送消息和 MAC 值
4. 接收者根据接收到的消息计算 MAC 值
5. 接收者根据自己计算的 MAC 值与收到的 MAC 对比
6. 如果对比成功，说明消息完整，并来自与正确的发送者

##### 4.3.2.3 数字签名

消息认证码的缺点在于**无法防止否认**，因为共享秘钥被 client、server 两端拥有，server 可以伪造 client 发送给自己的消息（自己给自己发送消息），为了解决这个问题，我们需要它们有各自的秘钥不被第二个知晓（这样也解决了共享秘钥的配送问题）

![æ°å­ç­¾åè¿ç¨](https://camo.githubusercontent.com/b3a74a8cabf7a22ec0fd2f73a9755d864519d71d/68747470733a2f2f6c6572616e32646565706c6561726e6a617661776562746563682e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f736f6d6570686f746f2f2545362539352542302545352541442539372545372541442542452545352539302538442545382542462538372545372541382538422e706e67)

> 数字签名和消息认证码都**不是为了加密**
> 可以将单向散列函数获取散列值的过程理解为使用 md5 摘要算法获取摘要的过程

使用自己的私钥对自己所认可的消息生成一个该消息专属的签名，这就是数字签名，表明我承认该消息来自自己
注意：**私钥用于加签，公钥用于解签，每个人都可以解签，查看消息的归属人**

##### 4.3.2.4 公钥密码

公钥密码也叫非对称密码，由公钥和私钥组成，它是最开始是为了解决秘钥的配送传输安全问题，即，我们不配送私钥，只配送公钥，私钥由本人保管
它与数字签名相反，公钥密码的私钥用于解密、公钥用于加密，每个人都可以用别人的公钥加密，但只有对应的私钥才能解开密文
client：明文 + 公钥 = 密文
server：密文 + 私钥 = 明文
注意：**公钥用于加密，私钥用于解密，只有私钥的归属者，才能查看消息的真正内容**

##### 4.3.2.5 证书

证书：全称公钥证书（Public-Key Certificate, PKC）,里面保存着归属者的基本信息，以及证书过期时间、归属者的公钥，并由认证机构（Certification Authority, **CA**）施加数字签名，表明，某个认证机构认定该公钥的确属于此人。

任何人都可以给自己或者别人的公钥添加自己的数字签名，但是可信度却是另外的问题。

##### 4.3.2.6 密码小结

| 密码       | 作用                               | 组成                      |
| ---------- | ---------------------------------- | ------------------------- |
| 消息认证码 | 确认消息的完整、并对消息的来源认证 | 共享秘钥+消息的散列值     |
| 数字签名   | 对消息的散列值签名                 | 公钥+私钥+消息的散列值    |
| 公钥密码   | 解决秘钥的配送问题                 | 公钥+私钥+消息            |
| 证书       | 解决公钥的归属问题                 | 公钥密码中的公钥+数字签名 |

##### 4.3.2.7 使用的密码技术

1. 伪随机数生成器：秘钥生成随机性，更难被猜测
2. 对称密码：对称密码使用的秘钥就是由伪随机数生成，相较于非对称密码，效率更高
3. 消息认证码：保证消息信息的完整性、以及验证消息信息的来源
4. 公钥密码：证书技术使用的就是公钥密码
5. 数字签名：验证证书的签名，确定由真实的某个 CA 颁发
6. 证书：解决公钥的真实归属问题，降低中间人攻击概率

##### 4.3.2.8 TLS总结

TLS 是一系列密码工具的框架，作为框架，它也是非常的灵活，体现在每个工具套件它都可以替换，即：客户端与服务端之间协商密码套件，从而更难的被攻破，例如使用不同方式的对称密码，或者公钥密码、数字签名生成方式、单向散列函数技术的替换等

#### 4.4 RSA 简单实例

加密算法：密文 = (明文^E) mod N，其中公钥为{E,N}，即”求明文的E次方的对 N 的余数“
解密算法：明文 = (密文^D) mod N，其中秘钥为{D,N}，即”求密文的D次方的对 N 的余数“

## 5. 基本术语

### 5.1 基本术语

#### 结点 （node）：

```
网络中的结点可以是计算机，集线器，交换机或路由器等。
```

#### 链路（link ）：

```
从一个结点到另一个结点的一段物理线路。中间没有任何其他交点。
```

#### 主机（host）：

```
连接在因特网上的计算机.
```

#### ISP（Internet Service Provider）：

```
因特网服务提供者（提供商）.
```

#### IXP（Internet eXchange Point）：

```
互联网交换点IXP的主要作用就是允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组。.
```

#### RFC(Request For Comments)

```
意思是“请求评议”，包含了关于Internet几乎所有的重要的文字资料。
```

#### 广域网WAN（Wide Area Network）

```
任务是通过长距离运送主机发送的数据
```

#### 城域网MAN（Metropolitan Area Network）

```
用来讲多个局域网进行互连
```

#### 局域网LAN（Local Area Network）

```
 学校或企业大多拥有多个互连的局域网
```

#### 个人区域网PAN（Personal Area Network）

```
在个人工作的地方把属于个人使用的电子设备用无线技术连接起来的网络  
```

#### 端系统（end system）：

```
处在因特网边缘的部分即是连接在因特网上的所有的主机.
```

#### 分组（packet ）：

```
因特网中传送的数据单元。由首部header和数据段组成。分组又称为包，首部可称为包头。
```

#### 存储转发（store and forward ）:

```
路由器收到一个分组，先存储下来，再检查气首部，查找转发表，按照首部中的目的地址，找到合适的接口转发出去。
```

#### 带宽（bandwidth）：

```
在计算机网络中，表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”。常用来表示网络的通信线路所能传送数据的能力。单位是“比特每秒”，记为b/s。
```

#### 吞吐量（throughput ）：

```
表示在单位时间内通过某个网络（或信道、接口）的数据量。吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据
```

### 5.3 重要知识点

1，**计算机网络（简称网络）**把许多计算机连接在一起，而互联网把许多网络连接在一起，是网络的网络。

2，小写字母i开头的**internet（互联网）**是通用名词，它泛指由多个计算机网络相互连接而成的网络。在这些网络之间的通信协议（即通信规则）可以是任意的。

大写字母I开头的**Internet（互联网）**是专用名词，它指全球最大的，开放的，由众多网络相互连接而成的特定的互联网，并采用TCP/IP协议作为通信规则，其前身为ARPANET。Internet的推荐译名为因特网，现在一般流行称为互联网。

3，**路由器**是实现**分组交换**的关键构件，其任务是转发受到的分组，这是网络核心部分最重要的功能。分组交换采用存储转发技术，表示把一个报文（要发送的整块数据）分为几个分组后在进行传送。在发送报文之前，先把较长的报文划分成为一个个更小的等长数据段。在每个数据端的前面加上一些由必要的控制信息组成的首部后，就构成了一个分组。分组有称为包。分组是在互联网中传送的数据单元，正式由于分组的头部包含了诸如目的地址和源地址等重要控制信息，每一个分组才能在互联网中独立的选择传输路径，并正确地交付到分组传输的终点。

4，互联网按工作方式可划分为**边缘部分和核心部分**。主机在网络的边缘部分，其作用是进行信息处理。由大量网络和连接这些网络的路由西组成边缘部分，其作用是提供连通性和交换。

5，计算机通信是计算机中进程（即运行着的程序）之间的通信。计算机网络采用的通信方式是客户-**服务器方式（C/S方式）和对等连接方式（P2P方式）**。

6，客户和服务器都是指通信中所涉及的应用进程。**客户是服务请求方，服务器是服务提供方**。

7，按照作用范围的不同，计算机网络分为**广域网WAN，城域网MAN,局域网LAN，个人区域网PAN**。

8，计算机网络最常用的性能指标是：**速率，带宽，吞吐量，时延（发送时延，处理时延，排队时延），时延带宽积，往返时间和信道利用率**。

9，**网络协议**即协议，是为进行网络中的数据交换而建立的规则。计算机网络的各层以及其协议集合，称为网络的体系结构。

10，五层体系结构由应用层，**运输层，网络层（网际层），数据链路层，物理层**组成。运输层最主要的协议是**TCP和UDP协议**，网络层最重要的协议是**IP协议**。

## 6. 五层网络模型常见术语和协议

### 6.1 物理层

#### 数据（data）：

```
运送消息的实体。
```

#### 信号（signal）：

```
数据的电气的或电磁的表现。或者说信号是适合在传输介质上传输的对象。
```

#### 码元（ code）：

```
在使用时间域（或简称为时域）的波形来表示数字信号时，代表不同离散数值的基本波形。
```

#### 单工（simplex ）：

```
只能有一个方向的通信而没有反方向的交互。
```

#### 半双工（half duplex ）：

```
通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。
```

#### 全双工（full duplex）：

```
通信的双方可以同时发送和接收信息。
```

#### 奈氏准则：

```
在任何信道中，码元的传输的效率是有上限的，传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对码元的判决（即识别）成为不可能。
```

#### 基带信号（baseband signal）：

```
来自信源的信号。指没有经过调制的数字信号或模拟信号。
```

#### 带通（频带）信号（bandpass signal）：

```
把基带信号经过载波调制后，把信号的频率范围搬移到较高的频段以便在信道中传输（即仅在一段频率范围内能够通过信道），这里调制过后的信号就是带通信号。
```

#### 调制（modulation ）：

```
对信号源的信息进行处理后加到载波信号上，使其变为适合在信道传输的形式的过程。
```

#### 信噪比（signal-to-noise ratio ）：

```
指信号的平均功率和噪声的平均功率之比，记为S/N。信噪比（dB）=10*log10（S/N）
```

#### 信道复用（channel multiplexing ）：

```
指多个用户共享同一个信道。（并不一定是同时）
```

#### 比特率（bit rate ）：

```
单位时间（每秒）内传送的比特数。
```

#### 波特率（baud rate）：

```
单位时间载波调制状态改变的次数。针对数据信号对载波的调制速率。
```

#### 复用（multiplexing）：

```
共享信道的方法
```

#### ADSL（Asymmetric Digital Subscriber Line ）：

```
非对称数字用户线。
```

#### 光纤同轴混合网（HFC网）:

```
在目前覆盖范围很广的有线电视网的基础上开发的一种居民宽带接入网
```

### （2），重要知识点总结

1，物理层的**主要任务**就是确定与**传输媒体接口有关的一些特性**，如**机械特性，电气特性，功能特性，过程特性**。

2，一个数据通信系统可划分为三大部分，即**源系统，传输系统，目的系统**。源系统包括源点（或源站，信源）和发送器，目的系统包括接收器和终点。

3，通信的目的是传送消息。如话音，文字，图像等都是消息，数据是运送消息的实体。信号则是数据的电器或电磁的表现。

4，根据信号中代表消息的参数的取值方式不同，信号可分为**模拟信号（或连续信号）和数字信号（或离散信号）**。在使用时间域（简称时域）的波形表示数字信号时，代表不同离散数值的基本波形称为码元。

5，根据双方信息交互的方式，通信可划分为**单向通信（或单工通信），双向交替通信（或半双工通信），双向同时通信（全双工通信）**。

6，**来自信源的信号称为基带信号**。信号要在信道上传输就要经过调制。调制有基带调制和带通调制之分。最基本的带通调制方法有**调幅，调频和调相**。还有更复杂的调制方法，如正交振幅调制。

7，要提高数据在信道上的**传递速率**，可以使用**更好的传输媒体，或使用先进的调制技术**。但数据**传输速率不可能任意被提高**。

8，传输媒体可分为两大类，即**导引型传输媒体（双绞线，同轴电缆，光纤）**和**非导引型传输媒体（无线，红外，大气激光）**。

9，为了有效利用光纤资源，在**光纤干线和用户之间广泛使用无源光网络PON**。无源光网络无需配备电源，其长期运营成本和管理成本都很低。最流行的无源光网络是**以太网无源光网络EPON和吉比特无源光网络GPON**。

### （3），最重要的知识点

#### **①，物理层的任务**

**透明地传送比特流**。也可以将物理层的主要任务描述为**确定与传输媒体的接口的一些特性**，即：机械特性（接口所用接线器的一些物理属性如形状尺寸），电气特性（接口电缆的各条线上出现的电压的范围），功能特性（某条线上出现的某一电平的电压的意义），过程特性（对于不同功能能的各种可能事件的出现顺序）。

#### 拓展：

物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。现有的计算机网络中的硬件设备和传输媒体的种类非常繁多，而且通信手段也有许多不同的方式。物理层的作用正是尽可能地屏蔽掉这些传输媒体和通信手段的差异，使物理层上面的数据链路层感觉不到这些差异，这样就可以使数据链路层只考虑完成本层的协议和服务，而不必考虑网络的具体传输媒体和通信手段是什么。

#### **②，几种常用的信道复用技术**

[![这里写图片描述](https://camo.githubusercontent.com/47e7f195826449a3a89d7ba4988e803e76eaaf11/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376637613137306563363631313f773d3132343726683d34323526663d706e6726733d3336373436)](https://camo.githubusercontent.com/47e7f195826449a3a89d7ba4988e803e76eaaf11/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376637613137306563363631313f773d3132343726683d34323526663d706e6726733d3336373436)

### **③，几种常用的宽带接入技术，主要是ADSL和FTTx**

用户到互联网的宽带接入方法有**非对称数字用户线ADSL**（用数字技术对现有的模拟电话线进行改造，而不需要重新布线。ASDL的快速版本是甚高速数字用户线VDSL。），**光纤同轴混合网HFC**（是在目前覆盖范围很广的有线电视网的基础上开发的一种居民宽带接入网）和**FTTx**（即光纤到······）。

### 6.2 数据链路层

### 1），基本术语

#### 链路（link）：

```
一个结点到相邻结点的一段物理链路
```

#### 数据链路（data link）：

```
把实现控制数据运输的协议的硬件和软件加到链路上就构成了数据链路
```

#### 循环冗余检验CRC（Cyclic Redundancy Check）：

```
为了保证数据传输的可靠性，CRC是数据链路层广泛使用的一种检错技术
```

#### 帧（frame）：

```
一个数据链路层的传输单元，由一个数据链路层首部和其携带的封包所组成协议数据单元。
```

#### MTU（Maximum Transfer Uint ）：

```
最大传送单元。帧的数据部分的的长度上限。
```

#### 误码率BER（Bit Error Rate ）：

```
在一段时间内，传输错误的比特占所传输比特总数的比率。
```

#### PPP（Point-to-Point Protocol ）：

```
点对点协议。即用户计算机和ISP进行通信时所使用的数据链路层协议。以下是PPP帧的示意图:
```

[![PPP](https://camo.githubusercontent.com/9416dd31ba2008abf8b4dfc125ed2c16260fe8cd/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376638323931633662303332633f773d36323426683d33353926663d6a70656726733d3434323731)](https://camo.githubusercontent.com/9416dd31ba2008abf8b4dfc125ed2c16260fe8cd/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376638323931633662303332633f773d36323426683d33353926663d6a70656726733d3434323731)

#### MAC地址（Media Access Control或者Medium Access Control）：

```
意译为媒体访问控制，或称为物理地址、硬件地址，用来定义网络设备的位置。
在OSI模型中，第三层网络层负责 IP地址，第二层数据链路层则负责 MAC地址。
因此一个主机会有一个MAC地址，而每个网络位置会有一个专属于它的IP地址  。
地址是识别某个系统的重要标识符，“名字指出我们所要寻找的资源，地址指出资源所在的地方，路由告诉我们如何到达该处”
```

#### 网桥（bridge）：

```
 一种用于数据链路层实现中继，连接两个或多个局域网的网络互连设备。
```

#### 交换机（switch ）：

```
广义的来说，交换机指的是一种通信系统中完成信息交换的设备。这里工作在数据链路层的交换机指的是交换式集线器，其实质是一个多接口的网桥
```

### （2），重要知识点总结

1，链路是从一个结点到相邻节点的一段**物理链路**，数据链路则在链路的基础上增加了一些**必要的硬件（如网络适配器）**和**软件（如协议的实现）**

2，数据链路层使用的主要是**点对点信道**和**广播信道**两种。

3，数据链路层传输的协议数据单元是帧。数据链路层的三个基本问题是：**封装成帧**，**透明传输**和**差错检测**

4，**循环冗余检验CRC**是一种检错方法，而帧检验序列FCS是添加在数据后面的冗余码

5，**点对点协议PPP**是数据链路层使用最多的一种协议，它的特点是：简单，只检测差错而不去纠正差错，不使用序号，也不进行流量控制，可同时支持多种网络层协议

6，PPPoE是为宽带上网的主机使用的链路层协议

7，局域网的优点是：具有**广播功能**，从一个站点可方便地访问全网；**便于系统的扩展和逐渐演变**；**提高了系统的可靠性，可用性和生存性。**

8，共向媒体通信资源的方法有二：一是**静态划分信道(各种复用技术)**，二是**动态媒体接入控制**，又称为多点接入（随即接入或受控接入）

9，计算机与外接局域网通信需要通过通信适配器（或网络适配器），它又称为网络接口卡或网卡。**计算器的硬件地址就在适配器的ROM中**。

10，以太网采用的无连接的工作方式，对发送的数据帧不进行编号，也不要求对方发回确认。目的站收到有差错帧就把它丢掉，其他什么也不做

11，以太网采用的协议是具有冲突检测的**载波监听多点接入CSMA/CD**。协议的特点是：**发送前先监听，边发送边监听，一旦发现总线上出现了碰撞，就立即停止发送。然后按照退避算法等待一段随机时间后再次发送。** 因此，每一个站点在自己发送数据之后的一小段时间内，存在这遭遇碰撞的可能性。以太网上的各站点平等的争用以太网信道

12，以太网的适配器具有过滤功能，它只接收单播帧，广播帧和多播帧。

13，使用集线器可以在物理层扩展以太网（扩展后的以太网任然是一个网络）

### （3），最重要的知识点

#### ① 数据链路层的点对点信道和广播信道的特点，以及这两种信道所使用的协议（PPP协议以及CSMA/CD协议）的特点

 1）点对点信道：使用一对一的点对点通信方式。

​    2）广播信道：使用一对多的广播通信方式。由于连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。

**PPP协议：**

四个阶段：建立链路（LCP协商）、验证（PAP口令验证以及CHAP）、网络控制协商、终止PPP链路

简单、提供不可靠的数据服务，检错，无纠错

**CSMA/CD：**

 载波监听（发送前检测）、冲突检测（发送的过程检查是否碰撞），

过程包括：监听、发送、检测、冲突处理，特点是：简单、具有广播功能、平均带宽、绝对平等、无优先级、低负荷高效、延时时间不可预测、传输速率与传输距离为一定值

退避算法：当出现冲突时如果采用相同的退避则会容易产生二次、三次退避，二进制指数退避算法

X-坚持算法：非坚持、1坚持、p坚持，区别在于线路忙时是否等待一段时间再次进行监听

#### ② 数据链路层的三个基本问题：**封装成帧**，**透明传输**，**差错检测**

     1）封装成帧
      一个帧的帧长 = 帧的数据部分 + 帧首部和帧尾部的长度；
      最大传送单元MTU ( Maximum Transfer Unit )：所能传送的 帧的数据部分 长度上限。
      首部和尾部的一个重要作用是进行帧定界（即确定帧的界限）。
      控制字符SOH ( Start Of Header )：表示帧的首部开始。控制字符EOT (End Of Transmission )：表示真的结束。
      注意： SOH和EOT都是控制字符的名称。十六进制编码分别为01（二进制为00000001），04（二进制为00000100）。
    2）透明传输
     含义：无论怎么样的比特组合的数据都能够通过这个数据链路层。
     透明是一个很重要的术语。表示：某一个实际存在的事物看起来却是好像不存在一样。
     问题：怎样使数据中可能出现的控制字符”SOH“和”EOT“在接受端不被解释为控制字符？
    解决方法：字节填充（byte stuffing )/字符填充（character stuffing），即在控制字符前插入转义字符”ESC“(十六进制1B,二进制00011011)。
    3）差错检测
      可靠传输：数据链路层的发送端发送什么，在接受端就收到什么。
      传输差错分两大类：最基本的差错比特差错；另一类复杂的差错即帧丢失、帧重复或帧失序。
      比特在传输过程中可能会产生差错，即比特差错。
      误码率BER( BIt Error Rate )：传输错误的比特占所传输比特总数的比率。设法提高信噪比，就可以使误码率减小。
      比特差错检测措施：循环冗余检验CRC ( Cyclic Reundancy Check )
      帧检验序列FCS ( Frame Check Sequence )：为进行检错而添加的n位冗余码。
      对于复杂的差错即帧丢失、帧重复、帧失序。在CRC检错的基础上，增加了帧编号、确认和重传机制。
#### ③ 以太网的MAC层硬件地址

MAC地址用于在局域网内部进行数据的转发，适配器上的硬件地址就用来标志路由器的某个接口。路由器如果连接到两个网络上，那么他就需要两个适配器和两个硬件地址。

分类：

1. 单播地址：就是一个帧向一个站点发送数据的方法，标志是I/G为0；
2. 广播地址：就是一个帧向整个局域网中的所有站点发送数据的方法，标志是MAC地址的48位全部都是“1”；
3. [多播地址](https://www.baidu.com/s?wd=%E5%A4%9A%E6%92%AD%E5%9C%B0%E5%9D%80&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd)：就是一个帧向局域网中的一组接收站点发送数据的办法，标志是I/G位为1.

#### ④ 适配器，转发器，集线器，网桥，以太网交换机的作用以及适用场合

第一层（物理层）：转发器、集线器

第二层（数据链路层）：网桥、交换机

第三层（网络层）：路由器、网关

转发器：工作在物理层，每个接口做简单的比特转发（根据mac地址），不进行碰撞检测，只有两个接口，主要作用：延伸网段、改变传输媒体

适配器：进行串行/并行转换、对数据进行缓存，接收到MAC帧后首先用硬件检测MAC帧中的MAC地址。

集线器：一种典型或特殊的转发器，作用为将一些机器连接起来组成一个局域网

网桥：采用存储转发进行转发，2-4个端口，转发之前必须进行CSMA/CD算法，只转发没有出错的帧（差错校验）

交换机：实质上是多端口的网桥，除了存储转发还有直通方式
路由器：网络逻辑边界，隔离外部网络的广播，将单个网络从逻辑上化成两个网络

网关：一种复杂的网络连接设备，可以支持不同协议之间的转换，实现不同协议网络之间的互连。网关具有对不兼容的高层协议进行转换的能力，能够实现异构设备之间的通信。

### 6.3 网络层

### （1），基本术语

#### 虚电路（Virtual Circuit）：

```
在两个终端设备的逻辑或物理端口之间，通过建立的双向的透明传输通道。虚电路表示这只是一条逻辑上的连接，分组都沿着这条逻辑连接按照存储转发方式传送，而并不是真正建立了一条物理连接。
```

#### IP（Internet Protocol ）：

```
网际协议 IP 是 TCP/IP体系中两个最主要的协议之一，是TCP/IP体系结构网际层的核心。配套的有ARP，RARP，ICMP，IGMP。
```

[![这里写图片描述](https://camo.githubusercontent.com/96fd61e40c5c60eb8ef986a5876d9a4a5237f119/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376639326639383433363238363f773d34353326683d33333126663d6a70656726733d3237353335)](https://camo.githubusercontent.com/96fd61e40c5c60eb8ef986a5876d9a4a5237f119/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376639326639383433363238363f773d34353326683d33333126663d6a70656726733d3237353335)

#### ARP（Address Resolution Protocol）：

```
地址解析协议
```

#### ICMP（Internet Control Message Protocol ）：

```
网际控制报文协议  （ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告。）
```

#### 子网掩码（subnet mask ）：

```
它是一种用来指明一个IP地址的哪些位标识的是主机所在的子网以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合IP地址一起使用。
```

#### CIDR（ Classless Inter-Domain Routing ）：

```
无分类域间路由选择  （特点是消除了传统的 A 类、B 类和 C 类地址以及划分子网的概念，并使用各种长度的“网络前缀”(network-prefix)来代替分类地址中的网络号和子网号）
```

#### 默认路由（default route）：

```
当在路由表中查不到能到达目的地址的路由时，路由器选择的路由。默认路由还可以减小路由表所占用的空间和搜索路由表所用的时间。
```

#### 路由选择算法（Virtual Circuit）：

```
路由选择协议的核心部分。因特网采用自适应的，分层次的路由选择协议。
```

### （2），重要知识点总结

1，TCP/IP协议中的网络层向上**只提供简单灵活的，无连接的，尽最大努力交付的数据报服务**。网络层不提供服务质量的承诺，不保证分组交付的时限所传送的分组可能出错，丢失，重复和失序。进程之间通信的可靠性由运输层负责

2，在互联网的交付有两种，一是在本网络**直接交付**不用经过路由器，另一种是和其他网络的**间接交付**，**至少经过一个路由器**，但最后一次一定是直接交付

3，分类的IP地址由**网络号字段（指明网络）**和**主机号字段（指明主机）**组成。网络号字段最前面的类别指明IP地址的类别。IP地址是一种分等级的地址结构。IP地址管理机构分配IP地址时只分配网络号，主机号由得到该网络号的单位自行分配。路由器根据目的主机所连接的网络号来转发分组。一个路由器至少连接到两个网络，所以**一个路由器至少应当有两个不同的IP地址**

4，IP数据报分为**首部和数据**两部分。首部的前一部分是固定长度，共20字节，是所有IP数据包必须具有的（源地址，目的地址，总长度等重要地段都固定在首部）。一些长度可变的可选字段固定在首部的后面。IP首部中的**生存时间**给出了IP数据报在互联网中**所能经过的最大路由器数**。可防止IP数据报在互联网中无限制的兜圈子。

5，地址解析协议**ARP把IP地址解析为硬件地址**。ARP的高速缓存可以大大减少网络上的通信量。因为这样可以使主机下次再与同样地址的主机通信时，可以直接从高速缓存中找到所需要的硬件地址而不需要再去广播方式发送ARP请求分组

6，**无分类域间路由选择CIDR是解决目前IP地址紧缺的一个好办法**。CIDR记法把IP地址后面加上斜线“/”，然后写上前缀所所占的位数。前缀（或网络前缀用来指明网络），前缀后面的部分是后缀，用来指明主机。CIDR把前缀都相同的连续的IP地址组成一个“CIDR地址块”，IP地址分配都以CIDR地址块为单位。

7， 网际控制报文协议是IP层的协议.ICMP报文作为IP数据报的数据，加上首部后组成IP数据报发送出去。**使用ICMP数据报并不是为了实现可靠传输。ICMP允许主机或路由器报告差错情况和提供有关异常情况的报告。**ICMP报文的种类有两种 **ICMP差错报告报文和ICMP询问报文**。

8，要解决IP地址耗尽的问题，**最根本的办法**是采用具有更大地址弓箭的新版本**IP协议-IPv6**。IPv6所带来的变化有**①更大的地址空间（采用128位地址）②灵活的首部格式③改进的选项④支持即插即用⑤支持资源的预分配⑥IPv6的首部改为8字节对齐**。另外IP数据报的目的地址可以是以下三种基本类型地址之一：单播，多播和任播

9，虚拟专用网络**VPN**利用公用的互联网作为本机构**专用网之间的通信载体**。VPN内使用互联网的专用地址。一个VPN至少要有一个路由器具有合法的全球IP地址，这样才能和本系统的另一个VPN通过互联网进行通信。所有通过互联网传送的数据都需要加密

10， **MPLS的特点是：①支持面向连接的服务质量②支持流量工程，平衡网络负载③有效的支持虚拟专用网VPN。**MPLS在入口节点给每一个IP数据报打上固定长度的“标记”，然后根据标记在第二层（链路层）用硬件进行转发（在标记交换路由器中进行标记交换），因而转发速率大大加快。

### （3），最重要知识点

#### ① 虚拟互联网络的概念

将全世界范围以内数以百万计的网络互连起来，并且能够互相通信的逻辑互联网络。

#### ② IP地址和物理地址的关系

IP地址：工作在网路层，主要是在广域网中进行数据的转发

MAC地址：工作在链路层，主要在局域网中进行数据的转发

**区别：**

1. 唯一性
2. 长度不同
3. 实现原理不同

**联系：**

1、IP地址和MAC地址通过ARP协议联系到一起

2、IP地址和MAC地址结合起来传送数据包。

3、IP地址可以和MAC地址进行绑定以此来确定网络上的唯一的一台电脑。

**两者同时存在的必要？**

1. 分层的实现原理，由于两个工作在不同的层，在分层的概念下不存在互为替代的说法
2. 整体地址与局部地址：信息发送时具有两个地址，IP用于表示最终的目的地，MAC用于表示下一跳的地址，（当然如果IP够，也可以网桥也可以直接通过IP进行转发，即链路层和网络层使用相同的协议）
3. 早期以太网的实现，早期网络只有集线器没有交换机，所有机器能够监听，每个机器只需要接收MAC匹配的包

#### ③ 传统的分类的IP地址（包括子网掩码）和误分类域间路由选择CIDR与NAT

#####  **IP地址**

传统网络IP地址中：将ip划分为网络ID+主机ID，用来唯一地标识一台计算机

**IP地址分类**：为了方便IP寻址，将IP地址分为五类，A类地址用IP地址**前8位表示网络ID**，用IP地址**后24位表示主机ID**。B类地址用IP地址**前16位表示网络ID**，用IP地址**后16位表示主机ID**。C类地址用IP地址**前24位表示网络ID**，用IP地址**后8位表示主机ID**。**D类地址用来多播使用，没有网络ID和主机ID之分**；E类地址保留实验用，没有网络ID和主机ID之分。主机ID不能为**全0（子网地址）或全1（广播地址）（虽然现在已经解除这个规定，但还是不用）**

**子网掩码：**用来计算ip地址哪部分标识网络ID，哪部分表示主机ID。根据ip类型，网络段全为1，主机段全为0

#####  **CIDR:** 

CIDR表示方法为：**IP地址/网络ID的位数**，

存在的目的：为了解决ip浪费问题，一种解决ip不够问题的方案

CIDR突破了传统IP地址的分类边界，将路由表中的若干条路由汇聚为一条路由，减少了路由表的规模，提高了路由器的可扩展性。

**路由汇总：**适当分配多个合适的IP地址，使得这些地址能够进行聚合，减少这些地址在路由表中的表项数。

**路由汇总与CIDR汇总的区别**：路由汇总还有类的概念，汇总后的掩码长度必须要大于或等于主类网络的掩码长度；CIDR是无类域间路由，网络地址一致就能进行CIDR汇总。

#####  NAT（网络地址转换）

[具体见这个博客](https://blog.csdn.net/freeking101/article/details/77962312)

NAT路由器在将内部网络的数据包发送到公用网络时，在IP包的报头把私有地址转换成合法的IP地址

RFC1918规定了三块专有的地址，作为私有的内部组网使用：

A类：10.0.0.0—10.255.255.255      10.0.0.0/8
B类：172.16.0.0—172.31.255.255   172.16.0.0/12
C类：192.168.0.0—192.168.255.255 192.168.0.0/16

**三种类型：**

- 静态NAT(Static NAT)（一对一）

![img](https://img-blog.csdn.net/20170913142720836)

- 动态地址NAT(Pooled NAT)（多对多）

维护一个外部ip连接池，当内网需要访问外网时，从中动态地取出一个外部ip地址与其绑定。

这个和DHCP具有相似之处（但是有区别，一个涉及到网络的转换，一个只是为了获取一个IP）。

使用场景：当ISP提供的合法IP地址略少于网络内部的计算机数量时。

![img](https://img-blog.csdn.net/20170913142757616)

- 网络地址端口转换NAPT（Network Address Port Translation）（Port-Level NAT）（多对一）

多个内网IP共享一个合法的外部IP，可以最大限度节约ip资源。最常用的方式。

![img](https://img-blog.csdn.net/20170913142845036)

NAPT是使用最普遍的一种转换方式，在HomeGW中也主要使用该方式。它又包含两种转换方式：SNAT和DNAT。
        (1)源NAT（Source NAT，SNAT）：修改数据包的源地址。源NAT改变第一个数据包的来源地址，它永远会在数据包发送到网络之前完成，数据包伪装就是一具SNAT的例子。
        (2)目的NAT（Destination NAT，DNAT）：修改数据包的目的地址。Destination NAT刚好与SNAT相反，它是改变第一个数据包的目的地地址，如平衡负载、端口转发和透明代理就是属于DNAT。

##### DHCP

**TCP/IP协议配置主机信息主要有三种方法： **

1. 手动配置 (服务器采用方式)
2. 动态获取 （客户端采用的方式）
3. 根据特定算法计算。 

**DHCP 主要分为两部分： 地址的管理 和 配置信息的传递** 

+ **地址管理：** 地址管理处理IP‘地址的动态分配、向客户端提供地址租约 
+ **配置信息的传递：** 包含DHCP报文格式、状态机

#### ④ 路由选择协议的工作原理

逐条路由，首先查看当前转发的目的ip是否在路由表中，如果在则从该端口转发出去，如果不存在，则从默认端口（网关）转发出去。

路由表的维护有采用静态的方式，也有动态方式进行更新。路由协议具有内部路由协议和外部路由协议，OSPF 是最常用的内部路由协议。自治系统之间的路由选择称为外部路由选择。BGP 是因特网的外部路由协议。内部路由选择有时称为 “域内路由选择”, 外部路由选择有时称为 “域间路由选择”。

具体参见博客：[路由选择过程与原理- tao546377318的博客- CSDN博客](https://blog.csdn.net/tao546377318/article/details/50209417)

### 6.4 传输层

### （1），基本术语

#### 进程（process）：

```
指计算机中正在运行的程序实体
```

#### 应用进程互相通信：

```
一台主机的进程和另一台主机中的一个进程交换数据的过程（另外注意通信真正的端点不是主机而是主机中的进程，也就是说端到端的通信是应用进程之间的通信）
```

#### 传输层的复用与分用：

```
复用指发送方不同的进程都可以通过统一个运输层协议传送数据。分用指接收方的运输层在剥去报文的首部后能把这些数据正确的交付到目的应用进程。 
```

#### TCP（Transmission Control Protocol）：

```
传输控制协议
```

#### UDP（User Datagram Protocol）：

```
用户数据报协议
```

#### 端口（port）（link）：

```
端口的目的是为了确认对方机器是那个进程在于自己进行交互，比如MSN和QQ的端口不同，如果没有端口就可能出现QQ进程和MSN交互错误。端口又称协议端口号。 
```

#### 停止等待协议（link）：

```
指发送方每发送完一个分组就停止发送，等待对方确认，在收到确认之后在发送下一个分组。
```

#### 流量控制（link）：

```
就是让发送方的发送速率不要太快，既要让接收方来得及接收，也不要使网络发生拥塞。
```

#### 拥塞控制（link）：

```
防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不致过载。拥塞控制所要做的都有一个前提，就是网络能够承受现有的网络负荷。
```

### （2），重要知识点总结

1，运输层提供**应用进程之间的逻辑通信**，也就是说，运输层之间的通信并不是真正在两个运输层之间直接传输数据。运输层向应用层屏蔽了下面网络的细节（如网络拓补，所采用的路由选择协议等），它使应用进程之间看起来好像两个运输层实体之间有一条端到端的逻辑通信信道。

2，**网络层**为**主机提供逻辑通信**，而**运输层**为应用进程之间提供**端到端的逻辑通信**。

3，运输层的两个重要协议是用户**数据报协议UDP**和**传输控制协议TCP**。按照OSI的术语，两个对等运输实体在通信时传送的数据单位叫做**运输协议数据单元TPDU**（Transport Protocol Data Unit）。但在TCP/IP体系中，则根据所使用的协议是TCP或UDP，分别称之为TCP报文段或UDP用户数据报。

4，UDP在传送数据之前不需要先建立连接，远地主机在收到UDP报文后，不需要给出任何确认。虽然UDP不提供可靠交付，但在某些情况下UDP确是一种最有效的工作方式。 TCP提供面向连接的服务。在传送数据之前必须先建立连接，数据传送结束后要释放连接。TCP不提供广播或多播服务。由于TCP要提供可靠的，面向连接的运输服务，这一难以避免增加了许多开销，如确认，流量控制，计时器以及连接管理等。这不仅使协议数据单元的首部增大很多，还要占用许多处理机资源。

5，硬件端口是不同硬件设备进行交互的接口，而软件端口是应用层各种协议进程与运输实体进行层间交互的一种地址。UDP和TCP的首部格式中都有**源端口和目的端口**这两个重要字段。当运输层收到IP层交上来的运输层报文时，就能够 根据其首部中的目的端口号把数据交付应用层的目的应用层。（两个进程之间进行通信不光要知道对方IP地址而且要知道对方的端口号(为了找到对方计算机中的应用进程)）

6，运输层用一个**16位端口号标志一个端口**。端口号只有本地意义，它只是为了标志计算机应用层中的各个进程在和运输层交互时的层间接口。在互联网的不同计算机中，相同的端口号是没有关联的。协议端口号简称端口。虽然通信的终点是应用进程，但只要把所发送的报文交到目的主机的某个合适端口，剩下的工作（最后交付目的进程）就由TCP和UDP来完成。

7，运输层的端口号分为**服务器端使用的端口号（0~~1023指派给熟知端口，1024~~49151是登记端口号）和客户端暂时使用的端口号（49152~65535）**

8，UDP的主要特点是**①无连接②尽最大努力交付③面向报文④无拥塞控制⑤支持一对一，一对多，多对一和多对多的交互通信⑥首部开销小（只有四个字段：源端口，目的端口，长度和检验和）**

9，TCP的主要特点是**①面向连接②每一条TCP连接只能是一对一的③提供可靠交付④提供全双工通信⑤面向字节流**

10，TCP用主机的IP地址加上主机上的端口号作为TCP连接的端点。这样的端点就叫做套接字（socket）或插口。套接字用（IP地址：端口号）来表示。每一条TCP连接唯一被通信两端的两个端点所确定。

11，**停止等待协议是为了实现可靠传输的**，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。

12，为了提高传输效率，发送方可以不使用低效率的停止等待协议，而是采用流水线传输。流水线传输就是发送方可连续发送多个分组，不必每发完一个分组就停下来等待对方确认。这样可使信道上一直有数据不间断的在传送。这种传输方式可以明显提高信道利用率。

13，停止等待协议中超时重传是指只要超过一段时间仍然没有收到确认，就重传前面发送过的分组（认为刚才发送过的分组丢失了）。因此每发送完一个分组需要设置一个超时计时器，其重转时间应比数据在分组传输的平均往返时间更长一些。这种自动重传方式常称为**自动重传请求ARQ**。另外在停止等待协议中若收到重复分组，就丢弃该分组，但同时还要发送确认。**连续ARQ协议**可提高信道利用率。发送维持一个发送窗口，凡位于发送窗口内的分组可连续发送出去，而不需要等待对方确认。接收方**一般采用累积确认**，对按序到达的最后一个分组发送确认，表明到这个分组位置的所有分组都已经正确收到了。

14，TCP报文段的前20个字节是固定的，后面有4n字节是根据需要增加的选项。因此，**TCP首部的最小长度是20字节。**

15，**TCP使用滑动窗口机制**。发送窗口里面的序号表示允许发送的序号。发送窗口后沿的后面部分表示已发送且已收到确认，而发送窗口前沿的前面部分表示不晕与发送。发送窗口后沿的变化情况有两种可能，即不动（没有收到新的确认）和前移（收到了新的确认）。发送窗口的前沿通常是不断向前移动的。一般来说，我们总是希望数据传输更快一些。但如果发送方把数据发送的过快，接收方就可能来不及接收，这就会造成数据的丢失。所谓流量控制就是让发送方的发送速率不要太快，要让接收方来得及接收。

16，在某段时间，若对网络中某一资源的需求超过了该资源所能提供的可用部分，网络的性能就要变坏。这种情况就叫拥塞。拥塞控制就是为了防止过多的数据注入到网络中，这样就可以使网络中的路由器或链路不致过载。拥塞控制所要做的都有一个前提，就是网络能够承受现有的网络负荷。**拥塞控制是一个全局性的过程，涉及到所有的主机，所有的路由器，以及与降低网络传输性能有关的所有因素。相反，流量控制往往是点对点通信量的控制，是个端到端的问题。流量控制所要做到的就是抑制发送端发送数据的速率，以便使接收端来得及接收。**

17，为了进行拥塞控制，TCP发送方要维持一个拥塞窗口cwnd的状态变量。拥塞控制窗口的大小取决于网络的拥塞程度，并且动态变化。发送方让自己的发送窗口取为拥塞窗口和接收方的接受窗口中较小的一个。

18，TCP的拥塞控制采用了四种算法，即**慢开始，拥塞避免，快重传和快恢复**。在网络层也可以使路由器采用适当的分组丢弃策略（如主动队列管理AQM），以减少网络拥塞的发生。

19，运输连接的三个阶段，即：**连接建立，数据传送和连接释放**。

20，主动发起TCP连接建立的应用进程叫做客户，而被动等待连接建立的应用进程叫做服务器。**TCP连接采用三报文握手机制**。服务器要确认用户的连接请求，然后客户要对服务器的确认进行确认。

21，**TCP的连接释放采用四报文握手机制**。任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送时，则发送连接释放通知，对方确认后就完全关闭了TCP连接

### （3），最重要的知识点

#### ① 端口和套接字的意义

套接字包含了端口，因为套接字 = (IP地址，端口号)。套接字是TCP连接（UDP连接应该也是）的端点。

套接字往往被看成是操作系统的一种抽象，这时，套接字和一个文件描述符是很相似的，并且是应用编程接口API的一部分

**端口**用来标识应用层服务，标志应用层的进程，通过端口将传输层的数据交给合适的应用层的程序。

#### ② 无连接UDP的特点

①无连接②尽最大努力交付③面向报文④无拥塞控制⑤支持一对一，一对多，多对一和多对多的交互通信⑥首部开销小（只有四个字段：源端口，目的端口，长度和检验和）

#### ③ 面向连接TCP的特点

①面向连接②每一条TCP连接只能是一对一的③提供可靠交付④提供全双工通信⑤面向字节流

#### ④ 在不可靠的网络上实现可靠传输的工作原理，停止等待协议和ARQ协议

等价问题：TCP如何实现可靠传输，具体见上面

后面两个子问题也见上面

#### ① TCP的滑动窗口，流量控制，拥塞控制和连接管理

见上面

### 6.5 应用层

### （1），基本术语

#### 域名系统（DNS）：

```
DNS（Domain Name System，域名系统），万维网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。
通过域名，最终得到该域名对应的IP地址的过程叫做域名解析（或主机名解析）。DNS协议运行在UDP协议之上，使用端口号53。在RFC文档中RFC 2181对DNS有规范说明，RFC 2136对DNS的动态更新进行说明，RFC 2308对DNS查询的反向缓存进行说明。
```

#### 文件传输协议（FTP）：

```
 FTP 是File TransferProtocol（文件传输协议）的英文简称，而中文简称为“文传协议”。用于Internet上的控制文件的双向传输。同时，它也是一个应用程序（Application）。
 基于不同的操作系统有不同的FTP应用程序，而所有这些应用程序都遵守同一种协议以传输文件。在FTP的使用当中，用户经常遇到两个概念："下载"（Download）和"上传"（Upload）。
 "下载"文件就是从远程主机拷贝文件至自己的计算机上；"上传"文件就是将文件从自己的计算机中拷贝至远程主机上。用Internet语言来说，用户可通过客户机程序向（从）远程主机上传（下载）文件。
```

#### 简单文件传输协议（TFTP）：

```
TFTP（Trivial File Transfer Protocol,简单文件传输协议）是TCP/IP协议族中的一个用来在客户机与服务器之间进行简单文件传输的协议，提供不复杂、开销不大的文件传输服务。端口号为69。
```

#### 远程终端协议（TELENET）：

```
Telnet协议是TCP/IP协议族中的一员，是Internet远程登陆服务的标准协议和主要方式。它为用户提供了在本地计算机上完成远程主机工作的能力。
在终端使用者的电脑上使用telnet程序，用它连接到服务器。终端使用者可以在telnet程序中输入命令，这些命令会在服务器上运行，就像直接在服务器的控制台上输入一样。
可以在本地就能控制服务器。要开始一个telnet会话，必须输入用户名和密码来登录服务器。Telnet是常用的远程控制Web服务器的方法。
```

#### 万维网（WWW）：

```
WWW是环球信息网的缩写，（亦作“Web”、“WWW”、“'W3'”，英文全称为“World Wide Web”），中文名字为“万维网”，"环球网"等，常简称为Web。分为Web客户端和Web服务器程序。
WWW可以让Web客户端（常用浏览器）访问浏览Web服务器上的页面。是一个由许多互相链接的超文本组成的系统，通过互联网访问。在这个系统中，每个有用的事物，称为一样“资源”；并且由一个全局“统一资源标识符”（URI）标识；这些资源通过超文本传输协议（Hypertext Transfer Protocol）传送给用户，而后者通过点击链接来获得资源。
万维网联盟（英语：World Wide Web Consortium，简称W3C），又称W3C理事会。1994年10月在麻省理工学院（MIT）计算机科学实验室成立。万维网联盟的创建者是万维网的发明者蒂姆·伯纳斯-李。
万维网并不等同互联网，万维网只是互联网所能提供的服务其中之一，是靠着互联网运行的一项服务。
```

#### 万维网的大致工作工程：

[![万维网的大致工作工程](https://camo.githubusercontent.com/25cd12cef72f4f0d410f94f4fb7d28c431fd07c8/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376666393661393630383761663f773d38333926683d36313026663d6a70656726733d3836373033)](https://camo.githubusercontent.com/25cd12cef72f4f0d410f94f4fb7d28c431fd07c8/68747470733a2f2f757365722d676f6c642d63646e2e786974752e696f2f323031382f342f312f313632376666393661393630383761663f773d38333926683d36313026663d6a70656726733d3836373033)

#### 统一资源定位符（URL）：

```
统一资源定位符是对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。 
```

#### 超文本传输协议（HTTP）：

```
超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。
设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。1960年美国人Ted Nelson构思了一种通过计算机处理文本信息的方法，并称之为超文本（hypertext）,这成为了HTTP超文本传输协议标准架构的发展根基。
```

#### 代理服务器（Proxy Server）：

```
 代理服务器（Proxy Server）是一种网络实体，它又称为万维网高速缓存。
 代理服务器把最近的一些请求和响应暂存在本地磁盘中。当新请求到达时，若代理服务器发现这个请求与暂时存放的的请求相同，就返回暂存的响应，而不需要按URL的地址再次去互联网访问该资源。
 代理服务器可在客户端或服务器工作，也可以在中间系统工作。 
```

#### http请求头：

```
http请求头，HTTP客户程序（例如浏览器），向服务器发送请求的时候必须指明请求类型（一般是GET或者POST）。如有必要，客户程序还可以选择发送其他的请求头。
- Accept：浏览器可接受的MIME类型。
- Accept-Charset：浏览器可接受的字符集。
- Accept-Encoding：浏览器能够进行解码的数据编码方式，比如gzip。Servlet能够向支持gzip的浏览器返回经gzip编码的HTML页面。许多情形下这可以减少5到10倍的下载时间。
- Accept-Language：浏览器所希望的语言种类，当服务器能够提供一种以上的语言版本时要用到。
- Authorization：授权信息，通常出现在对服务器发送的WWW-Authenticate头的应答中。
- Connection：表示是否需要持久连接。如果Servlet看到这里的值为“Keep-Alive”，或者看到请求使用的是HTTP 1.1（HTTP 1.1默认进行持久连接），它就可以利用持久连接的优点，当页面包含多个元素时（例如Applet，图片），显著地减少下载所需要的时间。要实现这一点，Servlet需要在应答中发送一个Content-Length头，最简单的实现方法是：先把内容写入ByteArrayOutputStream，然后在正式写出内容之前计算它的大小。
- Content-Length：表示请求消息正文的长度。
- Cookie：这是最重要的请求头信息之一
- From：请求发送者的email地址，由一些特殊的Web客户程序使用，浏览器不会用到它。
- Host：初始URL中的主机和端口。
- If-Modified-Since：只有当所请求的内容在指定的日期之后又经过修改才返回它，否则返回304“Not Modified”应答。
- Pragma：指定“no-cache”值表示服务器必须返回一个刷新后的文档，即使它是代理服务器而且已经有了页面的本地拷贝。
- Referer：包含一个URL，用户从该URL代表的页面出发访问当前请求的页面。
- User-Agent：浏览器类型，如果Servlet返回的内容与浏览器类型有关则该值非常有用。
```

#### 简单邮件传输协议(SMTP)：

```
 SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。
 SMTP协议属于TCP/IP协议簇，它帮助每台计算机在发送或中转信件时找到下一个目的地。
 通过SMTP协议所指定的服务器,就可以把E-mail寄到收信人的服务器上了，整个过程只要几分钟。SMTP服务器则是遵循SMTP协议的发送邮件服务器，用来发送或中转发出的电子邮件。
```

#### 搜索引擎：

```
 搜索引擎（Search Engine）是指根据一定的策略、运用特定的计算机程序从互联网上搜集信息，在对信息进行组织和处理后，为用户提供检索服务，将用户检索相关的信息展示给用户的系统。
 搜索引擎包括全文索引、目录索引、元搜索引擎、垂直搜索引擎、集合式搜索引擎、门户搜索引擎与免费链接列表等。
```

#### 全文索引：

```
 全文索引技术是目前搜索引擎的关键技术。
试想在1M大小的文件中搜索一个词，可能需要几秒，在100M的文件中可能需要几十秒，如果在更大的文件中搜索那么就需要更大的系统开销，这样的开销是不现实的。
所以在这样的矛盾下出现了全文索引技术，有时候有人叫倒排文档技术。
```

#### 目录索引：

```
目录索引（ search index/directory)，顾名思义就是将网站分门别类地存放在相应的目录中，因此用户在查询信息时，可选择关键词搜索，也可按分类目录逐层查找。
```

#### 垂直搜索引擎：

```
垂直搜索引擎是针对某一个行业的专业搜索引擎，是搜索引擎的细分和延伸，是对网页库中的某类专门的信息进行一次整合，定向分字段抽取出需要的数据进行处理后再以某种形式返回给用户。
垂直搜索是相对通用搜索引擎的信息量大、查询不准确、深度不够等提出来的新的搜索引擎服务模式，通过针对某一特定领域、某一特定人群或某一特定需求提供的有一定价值的信息和相关服务。
其特点就是“专、精、深”，且具有行业色彩，相比较通用搜索引擎的海量信息无序化，垂直搜索引擎则显得更加专注、具体和深入。
```

### （2），重要知识点总结

1，文件传输协议（FTP）使用TCP可靠的运输服务。FTP使用客户服务器方式。一个FTP服务器进程可以同时为多个用户提供服务。在进进行文件传输时，FTP的客户和服务器之间要先建立两个并行的TCP连接:**控制连接和数据连接**。实际用于传输文件的是数据连接。

2，万维网客户程序与服务器之间进行交互使用的协议是超文本传输协议HTTP。**HTTP使用TCP连接进行可靠传输。但HTTP本身是无连接、无状态的。HTTP/1.1协议使用了持续连接（分为非流水线方式和流水线方式）**

3，电子邮件把邮件发送到收件人使用的邮件服务器，并放在其中的收件人邮箱中，收件人可随时上网到自己使用的邮件服务器读取，相当于电子邮箱。

4，一个电子邮件系统有三个重要组成构件：**用户代理、邮件服务器、邮件协议**（包括邮件发送协议，如SMTP，和邮件读取协议，如POP3和IMAP）。用户代理和邮件服务器都要运行这些协议。

### （3），最重要知识点总结

#### ① 域名系统-从域名解析出IP地址

[关于域名系统DNS解析IP地址的一些总结](https://www.cnblogs.com/xsilence/p/6034467.html)

**DNS组成：**

- 名称解析器：又分为主名称服务器（拥有区域文件的原始版本的服务器），次名称服务器（维护副本，提供只读服务），唯高速缓存（帮助完成解析，并缓存）
- 域名解析器
- 名称服务器

**DNS服务器获取域名空间部分信息的方法：**

① 由管理员编辑一个原始区域文件；
② 从其他名称服务器那里复制区域文件；
③ 通过向其他DNS服务器查询来获取具有一定时效的缓存信息。

**域名解析**：

方式：正向解析（dns->ip）、反向解析（ip->dns）

类型：递归解析（一次查询到结果），反复解析（不断地向返回的名称服务器地址反复请求）

#### ② 访问一个网站大致的过程

见之前

#### ③ 系统调用和应用编程接口概念

具体见博客[系统调用接口与应用编程接口](https://blog.csdn.net/yanerhao/article/details/54598771)

系统调用接口是操作系统内核与上层应用进程进行交互通信的唯一接口。

应用编程接口API是一些预定义的函数，跟内核没有必然联系，提供APP与开发人员基于软件或者硬件以便访问一组程序的能力，这种情况无需链接内部实现细节。

**区别**

**API是函数定义，与内核无关**，而系统调用时通过中断向内核发出请求完成内核有的服务。一般而言，一个API可能需要一个或者多个系统调用来完成特定功能，这种需要跟内核通信的API就需要系统调用，反正不需要。程序员调用的是API，API再调用系统调用。总之，**API是一个提供给应用程序的接口，一组函数，是与程序员进行直接交互的。 系统调用则不与程序员进行交互的，它根据API函数，通过一个软中断机制向内核提交请求，以获取内核服务的接口。 并不是所有的API函数都一一对应一个系统调用(可能多个或者零个)**，有时，一个API函数会需要几个系统调用来共同完成函数的功能，甚至还有一些API函数不需要调用相应的系统调用（因此它所完成的不是内核提供的服务）